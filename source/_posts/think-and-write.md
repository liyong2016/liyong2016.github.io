---
title: 胡思乱想
date: 2017-07-04 22:27:06
tags:
- Doc
---

1 . 自动化测试
用门禁和测试用例去拦截开发版本里的bug，那么又如何保证门禁和测试用例代码正确呢？再写一个拦截门禁的门禁，测试用例的测试，写到什么程度合适？

2 . 自由软件
> 斯托曼在GPL的序言中说：“当我们说自由软件这个词的时候，我们在说的是自由，而不是免费。”

自由软件都是开源软件，但是开源软件不一定是自由软件。开源不一定免费，闭源也不一定就要收费。

3 . 代码依赖
> 为了利用多核，Python开始支持多线程。而解决多线程之间数据完整性和状态同步的最简单方法自然就是加锁。于是有了GIL这把超级大锁，而当越来越多的代码库开发者接受了这种设定后，他们开始大量依赖这种特性（即默认python内部对象是thread-safe的，无需在实现时考虑额外的内存锁和同步操作）。
慢慢的这种实现方式被发现是蛋疼且低效的。但当大家试图去拆分和去除GIL的时候， 发现大量库代码开发者已经重度依赖GIL而非常难以去除了。

> ——原文链接<http://cenalulu.github.io/python/gil-in-python/>

这个问题很有意思，最近代码也遇到一个问题，配置文件中有一部分整个代码处理流程都认为是一定会存在的，从没有考虑不存在的情况，但是现在有个服务可以不需要，删掉后就会有问题，同时修改代码成本比较高。

4 . 运维如何避免琐碎？
> 基础架构的服务化平台开发，目标是平台自助化，让开发依赖平台的能力自助完成对基础组件的需求，而不是依赖运维的人。这个事情是驱动运维转型和改进的动力，也是运维能够深入了解架构组件细节的有效途径。同时，要注意到，**如果不朝着服务化方向发展，运维将始终被拖累在这些基础组件的运维操作上**。

通过技术将人力从繁琐的工作中解放出来，否则这个团队技术很难快速成长。

5 . 监控和测试
> * 机器监控
对于机器监控有很多开源的方案，一般来说主要采集机器的CPU，内存，TPS，JVM等指标，一旦某个指标跨过红线，及时做出报警。
* 业务监控
对于业务数据比较复杂，根据不同的业务有几十种不同的监控指标，主要采用的是日志打点的方式。生产环境的每台机器会有一个专门解析日志的agent，这些agent增量的实时监控业务日志，并将日志解析得到跟业务相关的数据，发送给监控系统，从而监控系统能得到某个点或者某个时间段内的业务情况，根据划定的业务指标红线给出报警。
* 功能监控
将相关系统的冒烟用例在线上7*24小时连续不断运行，来及时发现线上的问题，尽量在先于用户发现问题避免故障面的扩大。
* 页面监控
对不同系统的页面7*24小时访问，看这些页面是否能够正常访问，链接是否被修改。

监控是不是一种测试？测试是不是也是一种监控？
