---
title: 持续交付：发布可靠软件的系统方法—-读书笔记
date: 2018-02-04 12:45:46
tags:
- CICD
---

[豆瓣链接](https://book.douban.com/subject/6862062/)


# 基础篇
---------

## 第一章 软件交付的问题

1.6 软件交付原则
* 为软件发布创建一个可重复且可靠的过程
 如何做到：（1）几乎将所有事情自动化。（2）将构建、部署、测试和发布软件所需的东西全部纳入到版本控制管理之中。
* 将几乎所有事情自动化
自动化是部署流水线的前提。
* 把所有的东西都纳入版本控制
包括文档，测试脚本，配置脚本，部署脚本，升级和回退脚本等等。
* 提前并频繁地做让你感到痛苦的事
* 内建质量
 将软件问题提前暴露，一旦发现流水线有失败，就要马上着手修复。
* "DONE" 意味着 “已发布”
一个特性只有交到用户手中才能算 ”DONE”。
> phylee注： 这个原则意味着，1.从开发业务代码到上线生产环境必须要快。否则一个月甚至更长时间才能上线生产环境，开发人员早就忘了。2. 业务开发人员一定会关注代码发布过程，这样也可以不断完善改进流水线，催熟流水线。
* 交付过程是每个成员的责任
* 持续改进

## 第二章 配置管理

## 第三章 持续集成

3.2 实现持续集成 需要满足3个条件：
* 版本控制
* 自动化构建
* 团队共识
 团队共识很重要。持续集成不是一种工具，而是一种实践。需要开发团队的给予一定投入并遵守一些准则。

# 部署流水线
-----------

## 第五章  部署流水线解析

5.3  部署流水线解析
* 只生成一次二进制包
 保证所有环境验证发布包是同一个。
* 对不同环境采用同一部署方式
 代码和应用配置文件分离，应用配置文件和环境相关。生产环境和开发测试环境应该由同一个团队管理。
* 对部署进行冒烟测试
* 向生产环境的副本中部署
 开发测试环境尽可能和生产环境相同。
* 每次变更都要立即在流水线中传递
* 只要有环节失败，就停止整个流水线
 一旦出现失败，变更团队应停下手头工作，立即着手修复。

5.7.2 变更的撤销
软件版本的快速迭代，不可避免会有一些缺陷，快速回滚是保障快速发布的的重要能力。

5.8 实现一个部署流水线
无论是从零创建新项目，还是想为已有的系统创建一个自动化的流水线，通常都应该使用**增量方法**来实现部署流水线。
> phylee注：理解“增量”很重要，流水线的建设从来不是一步到位的，不同公司交付模式不同，流水线也会不太一样，需要使用者和建设者的协作并根据实际交付流程不断完善它。

建立完整流水线一般步骤：
1. 对价值流进行建模并创建简单的可工作框架
 能画出从代码提交到发布的整个过程的价值流程图。
2. 将构建和部署流程自动化
3. 将单元测试和代码分析自动化
4. 将验收测试自动化
5. 将发布自动化

# 交付生态圈
-----------
