<html>
<head>
	
	<title>持续交付：发布可靠软件的系统方法—-读书笔记</title>
	<meta name="keywords" content="My Blog" />

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
	   <link href="/css/main.css?v=3" rel="stylesheet" type="text/css" />
    
        <script src="/js/util.js"></script>
        <script>
            if(isMobile()) {
                loadjscssfile('../css/mobile.css', 'css');
            } else {
                loadjscssfile('../css/desktop.css', 'css');
            }
        </script> 
    

    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">

    
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=3"/>
    

</head>

<body>


<h2 class="title">持续交付：发布可靠软件的系统方法—-读书笔记</h2>
<!---
<div style="text-align:center;margin-top: -10px;">
<div class="article-category">
发表于2018年2月4日




 </div>
--->
</div>

<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#基础篇"><span class="toc-text">基础篇</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#第1章-软件交付的问题"><span class="toc-text">第1章 软件交付的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第2章-配置管理"><span class="toc-text">第2章 配置管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第3章-持续集成"><span class="toc-text">第3章 持续集成</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#部署流水线"><span class="toc-text">部署流水线</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#第5章-部署流水线解析"><span class="toc-text">第5章  部署流水线解析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第6章-构建于部署的脚本化"><span class="toc-text">第6章 构建于部署的脚本化</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#交付生态圈"><span class="toc-text">交付生态圈</span></a></li></ol>
<p><a href="https://book.douban.com/subject/6862062/">豆瓣链接</a></p>
<p>本文主要是对阅读书籍我认为重要的内容进行概要记录。</p>
<h1 id="基础篇"><a href="#基础篇" class="headerlink" title="基础篇"></a>基础篇</h1><h2 id="第1章-软件交付的问题"><a href="#第1章-软件交付的问题" class="headerlink" title="第1章 软件交付的问题"></a>第1章 软件交付的问题</h2><p>1.6 软件交付原则</p>
<ul>
<li><p>为软件发布创建一个可重复且可靠的过程</p>
<p>如何做到：（1）几乎将所有事情自动化。（2）将构建、部署、测试和发布软件所需的东西全部纳入到版本控制管理之中。</p>
</li>
<li>将几乎所有事情自动化</li>
</ul>
<p>自动化是部署流水线的前提。</p>
<ul>
<li>把所有的东西都纳入版本控制</li>
</ul>
<p>包括文档，测试脚本，配置脚本，部署脚本，升级和回退脚本等等。</p>
<ul>
<li><p>提前并频繁地做让你感到痛苦的事</p>
</li>
<li><p>内建质量<br>将软件问题提前暴露，一旦发现流水线有失败，就要马上着手修复。</p>
</li>
<li><p>“DONE” 意味着 “已发布”</p>
</li>
</ul>
<p>一个特性只有交到用户手中才能算 ”DONE”。</p>
<blockquote>
<p>phylee注： 这个原则意味着，1.从开发业务代码到上线生产环境必须要快。否则一个月甚至更长时间才能上线生产环境，开发人员早就忘了。2. 业务开发人员一定会关注代码发布过程，这样也可以不断完善改进流水线，催熟流水线。</p>
<ul>
<li>交付过程是每个成员的责任</li>
<li>持续改进</li>
</ul>
</blockquote>
<h2 id="第2章-配置管理"><a href="#第2章-配置管理" class="headerlink" title="第2章 配置管理"></a>第2章 配置管理</h2><p>2.1 本章将讨论三个问题：</p>
<ul>
<li>为管理应用程序的构建，部署，测试和发布过程做好准备。从两个方面解决这个问题：对所有内容进行版本控制；管理依赖关系。</li>
<li>管理应用软件的配置信息。</li>
<li>整个环境的配置管理，包括应用程序的依赖软件，硬件和基础设施。</li>
</ul>
<p>2.2 使用版本控制</p>
<ul>
<li>对所有内容进行版本控制，不仅仅是源代码，包括测试代码，数据库脚本、构建和部署脚本等所有和软件发布的文件都要纳入版本控制中。</li>
<li>频繁提交代码到主干，因为长时间不提交代码会让合并工作变得过于复杂。</li>
</ul>
<p>2.4 软件配置管理</p>
<ul>
<li>应该以对待代码的方式来对待系统的配置，使其受到正确的管理和测试。</li>
<li>配置与灵活性。灵活性是有代价的。<blockquote>
<p>phylee注： 修改配置并不比修改代码风险低，因为配置修改更难被测试。除非有很好的回滚机制，因为回滚配置可以很快。回滚机制的前提是有版本控制。</p>
</blockquote>
</li>
</ul>
<p>2.5 环境管理</p>
<p>环境管理的关键在于能通过一个全自动过程来创建环境。</p>
<h2 id="第3章-持续集成"><a href="#第3章-持续集成" class="headerlink" title="第3章 持续集成"></a>第3章 持续集成</h2><p>3.2 实现持续集成 需要满足3个条件：</p>
<ul>
<li>版本控制</li>
<li>自动化构建</li>
<li>团队共识<br>团队共识很重要。持续集成不是一种工具，而是一种实践。需要开发团队的给予一定投入并遵守一些准则。</li>
</ul>
<h1 id="部署流水线"><a href="#部署流水线" class="headerlink" title="部署流水线"></a>部署流水线</h1><h2 id="第5章-部署流水线解析"><a href="#第5章-部署流水线解析" class="headerlink" title="第5章  部署流水线解析"></a>第5章  部署流水线解析</h2><p>5.3  部署流水线解析</p>
<ul>
<li>只生成一次二进制包<br>保证所有环境验证发布包是同一个。</li>
<li>对不同环境采用同一部署方式<br>代码和应用配置文件分离，应用配置文件和环境相关。生产环境和开发测试环境应该由同一个团队管理。</li>
<li>对部署进行冒烟测试</li>
<li>向生产环境的副本中部署<br>开发测试环境尽可能和生产环境相同。</li>
<li>每次变更都要立即在流水线中传递</li>
<li>只要有环节失败，就停止整个流水线<br>一旦出现失败，变更团队应停下手头工作，立即着手修复。</li>
</ul>
<p>5.7.2 变更的撤销<br>软件版本的快速迭代，不可避免会有一些缺陷，快速回滚是保障快速发布的的重要能力。</p>
<p>5.8 实现一个部署流水线<br>无论是从零创建新项目，还是想为已有的系统创建一个自动化的流水线，通常都应该使用<strong>增量方法</strong>来实现部署流水线。</p>
<blockquote>
<p>phylee注：理解“增量”很重要，流水线的建设从来不是一步到位的，不同公司交付模式不同，流水线也会不太一样，需要使用者和建设者的协作并根据实际交付流程不断完善它。</p>
</blockquote>
<p>建立完整流水线一般步骤:</p>
<p>1 . 对价值流进行建模并创建简单的可工作框架</p>
<blockquote>
<p>能画出从代码提交到发布的整个过程的价值流程图。</p>
</blockquote>
<p>2 . 将构建和部署流程自动化</p>
<p>3 . 将单元测试和代码分析自动化</p>
<p>4 . 将验收测试自动化</p>
<p>5 . 将发布自动化</p>
<p>5.9 度量</p>
<p>反馈是所有软件交付流程的核心。改善反馈的最佳方法是缩短反馈周期，并让结果可视化。</p>
<p>重要的问题是：度量是什么？选择什么样的度量项对团队行为有很大的影响。</p>
<p>对于软件交付过程来说，最重要的全局度量指标就是周期时间<br>，它指的是从决定要做某个特性开始，直到把这个特性交付给用户的这段时间。“你所在的组织中，如果仅仅修改过一行代码，需要多长时间才能把它部h署到生产环境中？你们是否以一种可重复且可靠的方式做这类事情？”</p>
<h2 id="第6章-构建于部署的脚本化"><a href="#第6章-构建于部署的脚本化" class="headerlink" title="第6章 构建于部署的脚本化"></a>第6章 构建于部署的脚本化</h2><p>6.3 构建部署脚本化的原则与实践</p>
<ul>
<li>为部署流水线的每个阶段创建脚本</li>
<li>使用同样的脚本向所有环境部署</li>
<li>确保部署流程是幂等的</li>
</ul>
<p>6.5 部署脚本化</p>
<p>环境管理的核心原则之一就是：对测试生产环境的修改只能由自动化过程执行。也就是说，我们不应该手工远程登陆到这些环境上执行部署工作，而应该将其完全脚本化。</p>
<h1 id="交付生态圈"><a href="#交付生态圈" class="headerlink" title="交付生态圈"></a>交付生态圈</h1>

<!--<a href="http://liyong.science/2018/02/04/continuous-delivery-notes/#disqus_thread" class="article-comment-link">Comments</a>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'undefined'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
-->
<div style="display:none">
<script src="http://s4.cnzz.com/stat.php?id=undefined&web_id=undefined" language="JavaScript"></script>script>
</div>






</body>
</html>